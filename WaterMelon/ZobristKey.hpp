#pragma once

#include "Square.hpp"
#include "Piece.hpp"

typedef unsigned long long ZobristKey;

// 24 * 64
// First is piece type and second is square index
constexpr ZobristKey KeysForXOR[] =
{
62212137934364463,2013122451136123448,3842828181719322624,863614471331202962,8604707626823979864,4338565442178105708,1593582345717068903,1821472596734554990,6510705601063089755,2277899299977942073,8445472794505779151,8002782700792614099,5593478269521422717,7942599252906981904,6767872020302944675,7702047722105884527,5338800829520482969,138281222132466972,4639184875170395080,2512966782099116544,6898528540406345757,2230870214998253882,7131974633966139580,6196934176231449213,3844722969603460031,6410237711330907934,5223539275736932092,8685394586558974749,1552081483643827534,6268220053917090475,5972308873585072274,3141676331173212210,6891255980240173430,1965079348994162276,1442274312913310524,9187253757363380556,5086486177731011209,193027078341726803,7441392475947793905,7208999596320190148,7631382718271978726,3987098220334571129,1318027733422977770,2796440078369620319,5210877706024663488,8081638180103245680,6981334248964808802,2874184275099567235,8994308272232626514,7602553253254592261,5750168548325262146,3900263944708765410,5131017124428927444,8057644589259706379,2237003032666219907,8302179620893213212,224908185085241398,9072592187381804150,6394201679872915990,1616909820904592042,2081150632396766577,6584204846648494231,8594724660004941651,3077374179785064143,48024053811984522,357454764707034286,2010733077351840464,2446010048346995555,5543183567536008136,5956387481535669240,5733927692921723096,8397824582661887384,2781264922822591132,1352304678285750833,8373896237130640747,3372059183054846184,8034795373802637,1929578266649921428,1551859949198991036,4131820734844172228,1961032459993338616,4658541277805656645,5935572126845057239,7220273026765686180,8517096916965503698,261852182403642513,758077585129466544,3637409888720927144,3759087145822212811,2909055232441866321,5005256121130135194,2979239685422737876,3607234968129413429,5347068728316705794,3117070519743409663,5021962014776473694,2113598709011114919,4619371335553046056,5694823968265986301,8938223045744345664,2632819504020817171,3189010509604276800,4445762045530424343,8495971619553712590,5336015133372978862,4016000401127632146,9016726744057407404,7084405283441471509,5272926054203644878,8776800720960459782,8220313126422335167,5786830903720222932,1218672672764245660,8660813360580039302,3175270676825288236,7610668330406986914,5074558553123482882,7296414289941914348,8550663964319883752,3283984096353040436,6452901212075196243,1316266301614123366,1158609224540581056,7897648337617707788,6868570762325188155,620742311851601665,6589452940812179791,2482089365399446864,2643311725166624675,6404358322334997474,3365854540195405622,8396930982731327068,6742648488483839605,6347722191531173321,3158824291805903304,2099872736659345627,5710650538016141772,4037703298860906264,2079442971285135993,419014953592106521,2369774041403676215,1970705249648145642,4771178249062817522,1910146638874455248,2879084418308742566,721479207587841718,1983547408242893877,3393887612809245640,2810338340005404449,3771041450351693061,3015063252865395855,3952059473603560866,1580567266531737639,4445949974825525726,1387585993431825790,5513200047332162329,1933030921899659749,7282611670672856632,6062083262533364651,1376303393533192641,3104103694187759178,8552328109354336210,4674557199863505871,8891152550438232879,8903211064246550242,7838890364321060854,9109646260697992653,732084830924193324,6085416732435626105,7058146066898111658,8832155389507415253,4452099603648721801,6032914360206828142,5650934292004300181,586162687298458204,4538638610710739279,7572268812902478294,8730146915747386871,9182640123181107411,15090327459206675,650384680262507045,6561623642227531909,5754761107439097239,8629103827953782598,662226897912249030,8440798487602073019,2329387191356740769,5931867403205125381,675242790508507629,3702784904130797206,3084062853966054959,7330409839999551828,1091235133332749642,2248771729282726491,6082633167204091109,523004149902913280,1601705956385696281,1742898820133531735,9181188270051995298,8308914088762245014,3361743254366535815,1970990532080584624,2473288940849333746,2583374518059134801,3970214670040450913,118275317820213008,3532573771787927550,7860458881860718242,5144194509084242662,7415585480310353830,2944264862197466989,5363155123699796972,2404960260035396046,344842048660741450,2463507771923313260,5146123659116458859,3841653283601855028,1761759293495257998,4642389683153317965,518774314252583167,7074851583852720688,4502333786686047505,5884715621807311784,6334002217584255765,4539030616026544906,623311675923603137,2731122429634554023,9121373923285394284,9149108893586209824,5784146150025820078,7928967166108796821,5155974726779475251,5179386643857206307,4215641386123007131,1347979393233256713,731582298189414302,5803295279093333450,2249846010990159061,6071243687524207322,1415881392922481356,3920965351689396414,5479364663894303236,4277237709385659713,4288662019995576725,1550952715321736387,2375800859206935712,1207313487612145025,4487884157381242839,1980928199898388583,408445679614651818,4307844577500172811,5060841239036261089,24609376859012018,1864414522053777854,1619492900452461546,8065481140846594537,2936237351588378564,813200365711147010,4362342011454197316,7018633740601983355,8162483369357004260,6170489618812510753,6236393327133814163,5327111404625187194,5818256583769166208,8607247777218908650,2933046123148487061,98838201168546134,5661099587528879498,7544354558682159454,4295301353563292981,3863646165756284604,3038623726825449490,5701379762856447146,5846829118604448438,2374593648759450383,1148254046665761716,3898509038507104506,6229658561838313111,3410330710319249396,7829247374955073213,111694764540102109,2998020343654768538,82134817713380334,1425187766181976219,3043763661036793813,4588094470373637225,8845943762123501003,6104079443657163502,672371108516425859,28018906835478762,1234468347452404926,2650481788294855454,563502619543632287,894173719483173283,8176303099002553272,267766629447433233,7853636058347097322,4143033971735830952,184111560702009396,6534114982274135808,1581341902659755622,6251187097696231625,953135979124183674,7260645772442677610,7723805218857070944,6122753361748505136,6495043509862855458,522031081275357611,2390694667633484823,6278215140265276968,8617520981099633415,3755793009729210078,8697221646962351508,3209594535940958552,6657131864509419599,818712596733093049,2342019316848147209,2639433603516103056,1636356535067847334,4003566730855874270,8584264047102890255,4474319419111245715,5200229148493500405,6826743609379822710,6585624879777402117,2894969660949858333,9187117465350146244,5489544109790573897,7449043099138843064,7802912927973839197,1841151858621049307,4984358024775713344,7864858360718373233,5105385256254381645,9049046163970341225,1509961894680536006,6981580708006408620,397421385084886581,5503495597195714082,3287043447022179663,8737935789609648151,1566588659676106760,5020213868867457081,3563680243704912992,3054331034990167131,7631682516511594001,1484689679180736804,310363439578302960,7339611166922525577,9010762574504252805,1740110378285188269,2933291352878074746,8998378730247171553,8538073350751109973,1505299070254846775,407285270169165473,3058421281714458508,5719768915389077735,1425364403598141911,7869266678206387341,6840727838713120935,1679763700459288570,4151191699630489642,8891551871954158348,360448986560592527,2630469977704319946,3507471976677552370,4189905814295781151,8724356347407303849,4520897701250078760,3730872701662483622,1871517954785537639,5392137977176373658,2885051046311872089,2295553498646245454,1240687284958558540,5455808596794959481,1875562677325875148,3162224872565885933,2507463688855926009,541249087003560494,3914164037476450719,6644952079629793938,7814811399189379848,7442436844370298017,5762333030298590677,8460826327941264346,1210309010775933719,3649669875150241382,8819949934572513916,4495007137984166457,7440024211577595373,904905065712820257,3750654516322569685,8444092027005977645,9159388422323361771,2650296556323289197,4904094061802583454,4160579762009307665,6845859564674553885,4104291374557292313,3693515987187064796,6793340674390369896,707477125621007208,3151546764071671019,8248030934506899841,2408949608817984446,566233469418685108,3915653942222574358,9214415124715856723,4815349384264775979,3253173297961595328,3579526112951189077,1878401374475726356,2868250827416634521,2074895365824684922,525237072903930356,746052845890515471,676531732592730585,4298785984882222022,5816826861344436093,3154317809931656332,3972168840056377499,1106780312277527965,2338213440725467652,8527690841726226990,7982795757499020350,7118151862733246022,2931777150805744505,5380003399577443150,1157352613661518534,3111983510556401947,1809856260767291488,5982942692334926520,230604220372266788,8405751245809860896,3875871443757221247,7507960595444918434,2772601368001184645,7942849955884164691,8438053102960424217,5591426532858182999,7701958153321497855,4532961941786863489,5860701576438721378,5168706105960180273,2005932842647331187,7564108899433314130,8420254068477524025,1397823089277852317,2013392409970169128,5152510059360379426,1152202039901771201,6705413269120167013,5214595630763507335,5989141341911337988,5371880990143438009,2786432087873603345,1760822363896856357,8304691490671553892,4762788601117992444,3402096504492225537,2294547912788576686,248632398239454615,6858179197770155078,6723837573027447377,909087874362908750,8708152872165721946,7852410491556554344,7257184150679064188,4936676575325526467,4237768825163118197,351855032751458578,4520420537230727592,6952223083017639953,5289115276337646001,3649938129422513939,2709074633993663622,8528706682425732511,421627880296909753,260917653068430187,8050358648417184614,1625810859425420778,313880602333817764,6552542890360968077,1684763928934751778,5995496013808859363,4010961534952112636,5366585428781276455,7710412891091592630,6149268677017437324,3675463481155632910,6262265784891871003,4763984378653723077,6317729392544663653,8930213819300026036,8719047221509207224,802740928015291684,8188961783303263302,2351672228615523825,5766959114475594835,1712150110872678179,1998663734632250351,5131454575824668250,3403382988037536260,5351521051162728024,2430427139319586179,7427987844854330794,1645660152892844661,3217059335753210984,5744428688967664858,6069729744220951318,4784857626725034561,4658088811118528779,7193161839523906847,2082951264062069173,6902384824379403298,5613789611639854367,5803103294584078804,2919236155817538584,3223644213442627265,1595320809531494961,4817479281849649132,518263392840571279,6430008979692034466,575823911145533405,5021777552166960115,2822289209494708020,637726451509117270,6166811645444079898,7919877739537808045,6054133044661405469,3265278586157802487,8037925172724490075,2496756020478387630,121792077436322413,8194615812519803460,7570366043668712428,2945218418632587723,8482656960237156049,8392644607394663977,5374107148440197643,4125656448162246071,778544236606377060,7693074981638548416,1546649641673636004,7816083549445083904,5998118010598841024,1624741878818095256,8302269364587012011,2102773945265875840,1994417802631096490,2000720530063794387,4995108784405933876,5513518431045576092,8726676097346689963,5177589681346139467,5854511564483869225,1659402506920919953,4696323768482590165,6814305824952985289,2777615310664713350,1358437852277226024,6257918137176463708,454617275888366479,1106198738695159174,927420023900852182,2334842443452978111,3187816616455922283,6208353317120308861,839169563912767507,8377290691497603124,5181041912493985076,7650772444454223068,3179167733144077113,8355954218376961610,8812333968910546835,4787767485292958863,8262976620069862284,6016460240013827089,5857421634709400371,2572016323323925856,6736702894659936341,8544819931989793803,1107197445597708365,8159891876310533862,921277391793937117,4951665802290008117,4197028489920042930,7509261280526331603,3045715231583501552,1359605645164560056,7388064711492694253,4835671894854216054,2866022151668422633,7046944285087742979,5547375202418903848,1177715949118225056,9124397276441900207,2906305482138466610,3358103701666118056,3278159252696291776,2610249886352461795,5667883225868888511,6416612945914168041,5141267685603717402,1358714781395210069,4118184722951780313,6393197836182309183,7032728729662808572,3696346951719290023,8867846491598200940,7568689407015826840,6875361595558674821,4776256588961246836,3138590899504140988,7693391357421269565,6558685331757949837,3289182092934856187,545559540532446962,9195894171558522985,5793512456772684925,7570898449973734101,7687590732243027993,8149915021672793480,6645152142109753458,8100412594155444402,4865846649435126669,835138482178745107,3722128693411834750,5201729995215355121,3781935196816974426,4368839765747529329,5974787777527098350,5463050649475504539,5663477255545297019,8690140000747404673,3391539522947871422,3636871919590116969,3384642846622657331,2431741968546159157,1404978752080895102,3243618072131710113,2042364509712281487,350292323360108152,1190157617601060296,1571626850212180916,5485802782404763214,6663462846564565223,4160300742049953360,7038757796564464315,5394522713003699377,5052882526752357603,9130108101085398103,9089999558416741514,8215163839216051566,1825498780372851017,488514403165171670,2562454143125302876,9049508849534844050,8005733183134602036,5613444338530718958,8290652231679693866,8568922945224496930,2844421990908638830,7477626126325587122,1775471931165227711,6486468981718903403,1580235453772036532,5206423890687412705,5477819718081072653,4594928981881269558,5083440393344366031,5515516867325297040,1839950075932301887,7211503063724324902,4624895160901146198,8063637549098431424,2116424029108924308,8116039197441601227,9101840253357671457,4736098753065427652,628575954613845259,6238108859237553074,4652237081009347184,1528423447422008431,3194345788017091364,6090393659231301057,4642387509919552282,9011592862398716510,1905875475784360708,1997780548056986450,4127259134672890704,1003064939719641514,466500091951782330,7768636718977120503,8391091103818724939,4362311963747578286,8194629685831993612,6770200731969317999,2715636147572672125,3005948940512416807,6351151015684439670,8605637211183049365,3494195221876239306,1016148087776262395,388933730144459292,7471579235777360586,6688838568953009393,5204406829621997178,5615425837771672302,4348717198826632085,8323956019466751763,1701917913167809185,3513377661539709902,5403015735393501512,6375753063347326184,1592490555036069140,4633412821891350773,6186246876435283284,7710481626483143306,7381508831856804024,4076878870276086168,871951589924544788,3083788293295603971,5602350934679824888,1207918193691303769,2783519860000590999,6847577542594501076,7255866359371211810,8035345609851697147,5732565542765180015,3131558908459140259,1106958194914635462,8170842806953533314,8812309340200347367,3325532978546182709,5910362546917475520,7996305810704773456,6899827102259079178,5994406883044167390,83824617417839468,8891898858695166092,6478195042167984399,102339941756274439,6648797258881510925,7972320566220756377,1030393866290378639,8055963229681127819,4810525163210715587,990553621149856509,2052419554699046538,4318875001220874708,7978854941191051913,2813181988041262218,4367094751731847008,8309598353226969757,8329468030008682582,7991154794689833178,1523279245687145193,1663657643285927612,7798376755434627987,5309855729923309187,3766311586406793319,5094663131258052985,4641421475483933606,2179920360329352508,5476124070598819762,8459517646169244409,9096782404861908275,5570000431651721255,1655714502563295038,502795021319920745,6951670970110297672,4264100505219851799,4852270673050215032,8929284568076366396,5539649616714145031,3656754701520023182,1631207314307990889,1085018580434022841,3279663617477883005,2461690144835923178,2503067293348236238,4386755413581480899,2258578375209887084,6619847022201824910,4733157944564107806,5290920689079087251,3682588382759111323,6685325722124625147,1166558734369123244,8674566358021195482,1780043105046807813,216027759624402229,1490363505866100159,4374627706029884365,686051167150113014,3935406427757646843,7530947106159353101,7500436373818540524,4184847713437679110,8049146028845471597,3406590227383161873,2384009232686136246,5828189437870168952,6961359555324529255,3081541723829355796,4160741849493689326,3024426826385459094,8914679280041684252,6266346225857672042,3558715320324896403,3099332401879848251,7518083453296086420,6369549542894719069,8579584139785796183,1250370737115336407,7439075589721601575,6419043349317114136,6661543611840757275,3610888822044373458,3586501589143512977,4564910550767878456,3297201567226132728,3345183309109015972,315321703827576812,8571633811473844007,6597775488091058599,5280995142780576907,8489595431303448543,6898713084324354828,5802216225826620699,4098833114730251818,5536206463196322663,3162678137576241300,3329635886252471006,3323341727870005302,7154513864119024386,3046211245943773169,7185061990494524364,2411712910592010589,6006226680732391336,6851571545503759175,7808652085847924233,1529517678519184618,101776731659387488,673731238105991321,2793207631321090397,2800004546601360656,8180769785198486618,5715889364873602247,2763552628384404963,5913448608034291416,6836194652325203728,2395780581307921657,7213378297627611074,6369736346842053844,2138891300821006568,6956810350444047456,3899857492081675586,4116931434739979587,7992476764286958213,4492849901726582515,7006708240578020345,5621142919110965612,2728623427113186898,3314319483859160196,2291026965288414023,2393704906283634133,212487772977870250,7600549045319800083,298319987973119319,1439154871749404244,5139250677164593038,2646083390157276792,3258670906675576867,4218367038631290746,8131192078738825210,2144038200947125555,6785900329098099832,5971708062074614777,9099988229588909159,1585708696126000088,1458082459037976002,8151676632988684980,5813024806801811919,2903836926205143880,7845639162097758605,1226415721454810293,155015799507366117,3139895702259644947,758258738635336764,3174420191434708639,8779305665424421094,5794567503430390407,6740954768662831323,2610821759933524821,8060885660734721949,1487791952718391448,5039213870298589405,1222734899731551994,1168845704464339447,2836761301959553489,7811549299738706263,2424844111376064222,1376810213880700851,6491611953239918607,6503685402919168489,229778466536315575,8150553106274441128,6882049064940997717,5403566621571367856,2327025498582529038,4147609485807028986,4345636827380582856,742193177783640474,6713293427334644172,2298503433298318487,3376836726708224757,5412015251563994007,3258468830308928411,4800531991581184336,6649938948415273591,1580307882221377988,4348470449449029981,3883639744777662372,3447964798857803661,466328849267723221,6912759959823221547,7062720403046815510,8243430604671322712,7206986686342644160,4424962029569130056,8247034677993523675,6271851257427416159,3920410657387576618,1666364532193467113,5629917942290835441,6766499537307829896,9190894468276876723,4602548947948115095,1597270547478383102,2859258439775286338,6402209724581118356,8495201429773037110,2226674439065320747,926550236195946407,7075752934571097444,1102590396553642272,3851498693656588127,8680631827076662482,6741827415062599518,7315146227051872307,5293807978164921265,3440119519047551042,2690489459114024230,512993287675295532,2721978707313004569,4591242046362612494,4959122392514462529,2710179128598684513,667944682026621973,700025774141548317,2972843546106587591,5185795296022016159,7856702804658409532,6769224476721552881,806528646979290940,3982561396974584613,3404370990524784482,2377941585920833833,2826927012646308864,5207606878707317297,2957350951061362691,1973093803396338139,3682946626971572327,1728837627176645340,5172847092309862354,7329507940222293847,3631752596663238974,1490445185025110426,975189518518155620,4651668132849636117,5545772172590875133,172483464030820955,6883449894560427486,7891848849757613573,5397807918407596603,2995479390830884744,7214860664616248411,8572165699229005449,808346268022329515,1903190436907504594,6142496836377958312,2590339075917135034,8704690522506321729,3058597435412811922,998709333750086517,2904610952887702880,8416455922385476626,2921784362309607926,8279092033822132569,9181675305826266868,300707588172443036,6529324226054742141,6254349289339440386,8604388500426118978,1991087147959893694,7668390023912014470,4818060184564767237,2691836876853928910,5719022151345416620,7157193413065261455,601429082598364485,7826647222045348168,6165930049879716515,6616785096953504486,7284282890771410805,6646148131427403422,5340219194457679638,2010576109733243171,789083574975227031,176527045883505784,6841635357794414512,8275264754497930120,5761383509386635219,792587440080000746,2508085097967800457,3215912711685552702,2006351850872143152,3314498667114263757,6383677121115220842,6225164956226568238,1716125272313392561,3509089179478485061,1385350920805551142,1146325160241987021,5990856665318105916,7091057471542865869,5926691652296338187,814159791654301679,5709988058828910492,2022625944784713449,2292373644795223335,383280686857046366,8814670858438550842,8194388814892363698,2950789321756931357,531979603023035233,1791063299092280015,5333258813645709239,6026555472558697378,391670942737481893,7638380234437562796,6663825527574305009,3243589743513946630,3957743065430397676,8379974707847884645,5291426874303848202,5806457348140670266,520904112520783045,3597825761665698794,3649685404291810913,3135711541820562228,7153639109003347210,5497719848152931718,313732487769864665,2855668125263826372,5105542707106309211,1064232199864870597,3660553696929368968,2539481284149960016,3687802490900955143,4978829107734704768,7590114765314130199,1349040310409103622,9038246787804112477,560418816286540564,4644758522297747185,8013994307343171549,5600407833079494134,2865269788957458623,960860151910094942,8179973805698423072,8084436657725410603,4101219431484755413,4839549331931794659,4299067409033194398,2256922687834762232,9017430523505975437,5010657598008687273,9003338332096938326,6954916285291080914,8970312237893264979,4681307177841461230,4473591831621224446,59746068857055882,2512420021446996862,3733924534946592041,8660095145480946074,4350239952843990714,7124672161892153553,5219871698697564794,3101187583864268680,6062757678811443740,7380754005011122940,4672688070849334738,2373490267170561790,8009024303128693537,3956543389268695898,3624197686639690563,1133955552790627325,1123187440114562876,4328024237499747517,2429653463427587501,7158965570696724164,7135438735591208255,8000554808294838946,1017249550751132440,5379126128088976009,5394560533974638383,3132669191984198961,7414402645697798732,2727082731252429658,7555962632525615357,900536143148558431,1793742638676985406,3070965511267186907,2389490214842662110,3153468782066018272,49566174771611383,4907319331570343669,6039231045723531580,3648573460859786345,8616024679893532572,3277634580462859916,3808768312806588441,3355162808218075224,4929434344486793656,897682672417932674,4304628014759156007,623548918819620577,8832291570231605945,8138204923028206456,3779745803424539956,3236960459717654960,1552965641465960213,3060899106496609033,4245478565866672626,8429769319028830008,3996084002748093158,529379276591185178,7333124225679418734,7284436287212638777,7346928641719099501,4510722118310898025,6886695990307196315,6299070641839521835,6348885309984662066,465442006405664149,5635271441249224629,1983388097600160275,3131084829764543537,8222649434639826018,6648868386871604537,2243571149260355740,2871570859138283641,821686707050354405,7931032052747886941,6843289038638646841,4980900608932647095,8602331922013597420,7886748074468905654,4654574637127719164,8796664273127125632,2451400560227013556,5931747188582568384,3820176216338141711,5399625060249840429,7326232809859018359,2873370229032837738,7777982693349500787,1173654765004869546,4500960664632668009,6545962217116340655,5216080380043834010,7903050170816969760,7407705644526616478,549565140110116015,2512224430888296215,7998502790249742008,2622363149007097936,2745778478374601600,2206479609726690043,1146311418692891666,8932719540596778946,8401796876748230863,963531069865900324,6248893623700451055,3186823023814274447,2979813620863825609,7811078070684766831,1146734867504235584,1090150841047542035,6766935915390338229,6305979572261268029,492910835450087733,1224718503879100901,2493898736657019791,2250141234676545166,2074800036652635238,8637965884622021934,6683259192853747875,589197469128254235,8523529377245753193,8325852983407966814,4072177516433575249,5452537873464807617,5972124060821592848,1120842719893235996,4630328208689315001,3762329518182107628,6808585084617064198,8329859555538163642,5585322103288200634,8700983985431023859,6893525070389750425,5141666106312625467,8840625825937717058,4532057255444309491,2643575150125442860,1016034469259935093,7810147674246081357,4698518031853635278,8768568927408504841,5082459228335284060,4756718626118392932,2532812860104848132,5050302351760952924,1962231309576142226,2445742567583971973,8489993283614326916,7663221289547000204,8612099492429350831,1676839684805114020,1055992239119089620,4926686809382977712,2854001842538213073,2316415490196102120,4615211176109279098,3969648649160762825,7721477478211268026,8162530049206960491,8454600213410076531,7107452694440949001,8694248071749756827,8985525004811883380,1478133550616196830,4206402228934017464,4387628666654312733,9155790367917814033,7424646598684480541,2258421335945729003,800404848277526787,149578799971569202,4707196204715838479,8483326234576831405,7175448563118712917,7879717750190782083,1195143810965887608,4866923738642393337,5604414735149185307,1946789603655440413,6235485743386132418,361957883423013436,6079067675890559347,1922887292490258083,670491648468582637,8192039883837353466,8551401249764332744,4836358785189122563,3471190212547659755,8981861091220579782,8541367425884082316,2781817763071339888,6760484670225786243,8291845575127852413,5245096627235690265,5761231047676595713,7505290631586592968,7429991017089792096,5672426222508015116,8141511240281074441,2657705718648012825,1033176752686326973,7669775851205317344,4795682681994174008,5815768832471325567,4711422760350029589,2615302848628717125,1260187282905763429,5972342122735812319,2280397948105327092,2389093515662196401,8347269355400834736,5436764948787871165,3115553055162889347,7933467163398472758,8766853231004077898,6738175056011588707,5138888073230158671,5339048967327217859,4357356645835733495,6668332796493365770,6842143128874420922,6176729788731296685,3055216762563154043,3783878578740000178,2803798241331852694,7427027025344491452,5188711385472547999,8076079281792785189,7713949981983509452,5115353632187192808,4384930630831372233,6644724122128969818,271071402347296708,6290223598401205917,1536821909200471196,4315324077518539309,8005805300651591424,5327523100503086794,208500867572418871,2345859660499292132,6033773542624436618,5662388350300501584,5020372762092153655,6170041719414259416,8495499086119899927,6791819044421414631,7209455558182996291,641974889936914662,8503436172989559987,2689872934780503667,3008615168726787926,2201844316332533684,5965369526843747032,7130049384297369272,5318991576588688671,2229330807128127425,5774235196811589336,2882639912165271514,2585676064999276195,199527474261473586,511882016052187003,1848404583487541728,3550115677333655736,3977018821286063688,388127608599001010,4146688382639565692,3014506625853655624,3779266008892939630,8797660205352174671,9014900406612725989,4200937389532705260,5192582980552396848,5754123691276316160,9094727173187292948,4000642103995381002,8489626214876631289,7302575869931335520,4617709129699980882,1957536104317129341,6802948681472173974,3788129903141731384,6126064382408946875,5892226757707403547,8664457222389873640,228300554029004137,3440143062306418722,4883379392698930664,840596739616360788,2345801926710075613,2559320359979623949,357679924223927867,8663355259797536207,3508413514126274517,3741668393174698081,392759873607752701,7151910709325282066,8145609023251377202,7797977337002525989,267039502858259087,8087684664336494587,6667641361036344729,985030300104675526,2874665954028228378,8733003887406063750,2157190457498543753,8904099057083306565,6517817976019333662,6824685077787356373,8677563255089254183,3230120053229827956,2224706537311185878,4703129896520072199,7201720645055272585,3010829338875830540,6728442393909797866,5041904518829136269,7403521051626763598,5198105476201143317,8798103847247575712,3456970351090983891,2018828997782628845,5823399699036063508,1215425380426099774,3881132667330860920,1300704795594182755,1965310270375633630,6886541248143773031,3755108039999895797,7708270554593967530,1183409385724610555,7564409336384944683,562605357802066705,2164262280518193591,4456277702404257739,4033068719576438025,4653748463674960922,2690559101140449941,3929450028065786497,5863055956576854631,618571823346385733,1325085631023708731,242900953512736770,5891172717475382841,7840138673529616925,6485338741498202902,2009465588716405755,760005305302703972,4401805967787453332,4560910199439398187,8406959158657797229,7709663935383591857,8074696900692904922,2146359701345828332,1252066177375697354,8388591085014108025,7343325780070041184,7790610891098772704,5461483307480303674,3943295035873240688,5628245449338172351,8622362933415311879,8231470929473037381,3928160809550139895,2107003799896706998,3908641593856432182,3966997554443310415,4694886727295525019,7276593597591542110,7374226164209003049,4908622999106853053,7487011099675480784,9183188153139434469,4625872157347716064,1177919318683299920,2194547825187670076,2365131175463655137,1672285443423752072,5475251938341206335,416741459678268646,890509359094678622,4328608964341931354,5762357863958788131,3314680282851949018,1617106224332056715,1769726201481188018,499213885107703112,1526531591669748674,1090106733408734500,3656591826325367845,9079638299073280316,8411605652765806968,8819073012908283424,1259370667483375628,4682120018662854137,1646194657538355155,5651981933046773391,1370750176528011513,20336026008805280,3036973046876959712,1314531122217171254,8595295705175841766,8458046188499370293,3294401728723550869,8256609773890655122,7037752760050292963,3302076592641499461,719586644718918614,7940961833392250505,876296248620236837,6335829231578406000,2665709841927329452,619642370350698467,2001755251680550158,6470101153830642758,852064711695803013,6331627376428977329,1763776104299682525,3954677839655307057,3054059943178576637,7753018219612482621,5468180542421175594,3483689546117090540,8793699754069243843,7280740604646534872,5204276417365452168,2799641730271807075,5979457881305888526,1462069620513484183,154480861389186960,6515926269901813128,4789660223621256528,5415222244882110805,6219504150757319685,4300685617563217476,1315874481393140707,4831506963639537184,3453027089322993894,4383209096389389266,7235690607771716623,2153051292314511260,
};

constexpr ZobristKey HashKeyMove(ZobristKey key, Square start, Square target, Piece startPiece, Piece targetPiece, int gameMoveCount)
{
	key ^= KeysForXOR[0]; // side to move
	key ^= KeysForXOR[startPiece * 64 + start];
	key ^= KeysForXOR[startPiece * 64 + target];
	key ^= KeysForXOR[targetPiece * 64 + target];
	return key;
}

// Used for castle, enpassant, twopawnmove
//constexpr ZobristKey HashKeyMisc(ZobristKey key, int Index)
//{
//	key ^= KeysForXOR[startPiece * 64 + start];
//}